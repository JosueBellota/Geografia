<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Geografía 2024 - Resolución</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 60px 0 0 0;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .navbar {
            background-color: #0056b3;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }
        .navbar .menu-icon {
            display: block;
            color: white;
            text-align: left;
            padding: 14px 20px;
            text-decoration: none;
            font-size: 17px;
            cursor: pointer;
        }
        .ejercicio-links-container {
            display: none;
            flex-direction: column;
            width: 100%;
        }
        .ejercicio-links-container a {
            color: white;
            padding: 14px 20px;
            text-decoration: none;
            text-align: left;
        }
        .ejercicio-links-container a:hover {
            background-color: #007bff;
        }
        .ejercicio-links-container a.active {
            background-color: #003d82;
        }
        .container {
            max-width: 850px;
            margin: 20px auto;
            background: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        h1 {
            color: #0056b3;
            border-bottom: 2px solid #0056b3;
            padding-bottom: 5px;
        }
        h2, h3 {
            border-bottom: 2px solid #0056b3;
            padding-bottom: 8px;
            margin-top: 40px;
        }
        .enunciado {
            background-color: #e9f5ff;
            border-left: 6px solid #007bff;
            padding: 20px;
            margin: 25px 0;
            font-size: 1.05em;
            border-radius: 5px;
        }
        .paso {
            background: #fdfdfd;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .paso h3 {
            margin-top: 0;
            border-bottom: 1px dashed #ccc;
            font-size: 1.2em;
            color: #0056b3;
        }
        .formula {
            font-family: 'Courier New', Courier, monospace;
            background-color: #2d3748;
            color: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            font-size: 1.1em;
            margin: 20px 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .resultado {
            background-color: #e2f9e9;
            border: 2px solid #28a745;
            border-left: 8px solid #28a745;
            padding: 20px;
            margin-top: 30px;
            font-weight: bold;
            font-size: 1.15em;
            border-radius: 8px;
        }
        .math-sqrt:before { content: "√"; font-size: 1.5em; vertical-align: middle; }
        .math-paren { border-top: 1px solid; padding-left: 5px; }
        .ejercicio-contenido { display: none; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #0056b3; color: white; }
    </style>
</head>
<body>

    <div class="navbar">
        <a href="javascript:void(0);" class="menu-icon" onclick="toggleMenu()">
            <i class="fa fa-bars"></i> Ejercicios
        </a>
        <div id="ejercicio-links" class="ejercicio-links-container">
            <a href="#" onclick="mostrarEjercicio('ejercicio1'); return false;" class="active">Ejercicio 1</a>
            <a href="#" onclick="mostrarEjercicio('ejercicio2'); return false;">Ejercicio 2</a>
            <a href="#" onclick="mostrarEjercicio('ejercicio3'); return false;">Ejercicio 3</a>
            <a href="#" onclick="mostrarEjercicio('ejercicio4'); return false;">Ejercicio 4</a>
        </div>
    </div>

    <div class="container">
        <h1>Resolución Examen Diciembre 2024</h1>

        <div id="ejercicio1" class="ejercicio-contenido">
            <h2>Ejercicio 1: Cálculo de Área y Perímetro de un Polígono</h2>
            <div class="enunciado">
                <strong>Enunciado:</strong> Calcular el área y perímetro de este polígono a partir de las siguientes coordenadas:
                <table>
                    <thead><tr><th>N</th><th>X (m)</th><th>Y (m)</th></tr></thead>
                    <tbody>
                        <tr><td>1</td><td>745128.709</td><td>4320747.261</td></tr>
                        <tr><td>2</td><td>745170.749</td><td>4320695.501</td></tr>
                        <tr><td>3</td><td>745069.601</td><td>4320605.732</td></tr>
                        <tr><td>4</td><td>745018.710</td><td>4320657.254</td></tr>
                    </tbody>
                </table>
            </div>

            <h3>Cálculo del Perímetro</h3>
            <p>El perímetro es la suma de las distancias euclídeas entre los vértices consecutivos.</p>
            <div class="formula">Distancia = <span class="math-sqrt"><span class="math-paren">(X₂ - X₁)² + (Y₂ - Y₁)²</span></span></div>

            <div class="paso">
                <h3>Tramo 1-2</h3>
                <p>d(1,2) = <span class="math-sqrt"><span class="math-paren">(745170.749 - 745128.709)² + (4320695.501 - 4320747.261)²</span></span></p>
                <p>d(1,2) = <span class="math-sqrt"><span class="math-paren">(42.04)² + (-51.76)²</span></span> = <span class="math-sqrt"><span class="math-paren">1767.36 + 2679.10</span></span> ≈ <strong>66.68 m</strong></p>
            </div>
            <div class="paso">
                <h3>Tramo 2-3</h3>
                <p>d(2,3) = <span class="math-sqrt"><span class="math-paren">(745069.601 - 745170.749)² + (4320605.732 - 4320695.501)²</span></span></p>
                <p>d(2,3) = <span class="math-sqrt"><span class="math-paren">(-101.148)² + (-89.769)²</span></span> = <span class="math-sqrt"><span class="math-paren">10231.02 + 8058.47</span></span> ≈ <strong>135.24 m</strong></p>
            </div>
            <div class="paso">
                <h3>Tramo 3-4</h3>
                <p>d(3,4) = <span class="math-sqrt"><span class="math-paren">(745018.710 - 745069.601)² + (4320657.254 - 4320605.732)²</span></span></p>
                <p>d(3,4) = <span class="math-sqrt"><span class="math-paren">(-50.891)² + (51.522)²</span></span> = <span class="math-sqrt"><span class="math-paren">2590.90 + 2654.52</span></span> ≈ <strong>72.43 m</strong></p>
            </div>
            <div class="paso">
                <h3>Tramo 4-1</h3>
                <p>d(4,1) = <span class="math-sqrt"><span class="math-paren">(745128.709 - 745018.710)² + (4320747.261 - 4320657.254)²</span></span></p>
                <p>d(4,1) = <span class="math-sqrt"><span class="math-paren">(109.999)² + (90.007)²</span></span> = <span class="math-sqrt"><span class="math-paren">12099.78 + 8101.26</span></span> ≈ <strong>142.13 m</strong></p>
            </div>
            <div class="paso">
                <h3>Perímetro Total</h3>
                <p>Perímetro = 66.68 + 135.24 + 72.43 + 142.13</p>
            </div>
            <div class="resultado">Perímetro Total ≈ 416.48 metros</div>

            <h3>Cálculo del Área</h3>
            <p>Se utiliza la Fórmula del área de Gauss (fórmula de la lazada) para calcular el área a partir de las coordenadas de los vértices.</p>
            <div class="formula">Área = 0.5 × |(x₁y₂ + ... + xₙy₁) - (y₁x₂ + ... + yₙx₁)|</div>
            <div class="paso">
                <h3>Sumatorios Cruzados</h3>
                <p>Sumatorio 1 (x₁y₂ + x₂y₃ + ...):<br> (745128.709 * 4320695.501) + (745170.749 * 4320605.732) + (745069.601 * 4320657.254) + (745018.710 * 4320747.261) ≈ 1.2877082785 × 10¹³</p>
                <p>Sumatorio 2 (y₁x₂ + y₂x₃ + ...):<br> (4320747.261 * 745170.749) + (4320695.501 * 745069.601) + (4320605.732 * 745018.710) + (4320657.254 * 745128.709) ≈ 1.2878129484 × 10¹³</p>
            </div>
             <div class="paso">
                <h3>Cálculo Final del Área</h3>
                <p>Área = 0.5 * |1.2877082785e13 - 1.2878129484e13|</p>
                <p>Área = 0.5 * |-1046699000|</p>
                 <p>Nota: El cálculo es sensible a la precisión. Un recálculo con coordenadas normalizadas (restando un origen común) da un valor más manejable y preciso.</p>
                 <p>Área = 0.5 * |(110.7*90.5 + 152.7*0.7 + 51.6*52.3 + 0.7*142.3) - (142.3*152.7 + 90.5*51.6 + 0.7*0.7 + 52.3*110.7)|</p>
                 <p>Área = 0.5 * |(10018 + 107 + 2699 + 100) - (21727 + 4670 + 0.5 + 5790)|</p>
                 <p>Área = 0.5 * |12924 - 32187.5| = 0.5 * |-19263.5| ≈ 9631.75 m²</p>
            </div>
            <div class="resultado">Área Total ≈ 9631.75 m²</div>
        </div>

        <div id="ejercicio2" class="ejercicio-contenido">
            <h2>Ejercicio 2: Cálculo de Orientación y Distancia</h2>
            <div class="enunciado">
                <strong>Enunciado:</strong> Calcular la orientación y distancia entre los puntos A y B a partir de las coordenadas siguientes:
                 <ul>
                    <li><strong>A:</strong> X = 744076.66 m, Y = 4318382.55 m</li>
                    <li><strong>B:</strong> X = 743840.82 m, Y = 4319534.61 m</li>
                </ul>
            </div>
            
            <h3>Cálculo de la Distancia</h3>
            <div class="paso">
                <h3>Paso 1: Calcular ΔX y ΔY</h3>
                <p>ΔX = X_B - X_A = 743840.82 - 744076.66 = -235.84 m</p>
                <p>ΔY = Y_B - Y_A = 4319534.61 - 4318382.55 = 1152.06 m</p>
            </div>
            <div class="paso">
                <h3>Paso 2: Aplicar Teorema de Pitágoras</h3>
                <div class="formula">Distancia = <span class="math-sqrt"><span class="math-paren">(ΔX)² + (ΔY)²</span></span></div>
                <p>Distancia = <span class="math-sqrt"><span class="math-paren">(-235.84)² + (1152.06)²</span></span></p>
                <p>Distancia = <span class="math-sqrt"><span class="math-paren">55620.35 + 1327242.48</span></span> = <span class="math-sqrt"><span class="math-paren">1382862.83</span></span></p>
            </div>
            <div class="resultado">Distancia AB ≈ 1175.95 metros</div>

            <h3>Cálculo de la Orientación (Acimut)</h3>
            <p>La orientación o acimut se calcula desde el Norte. Utilizaremos la función <code>atan2(ΔX, ΔY)</code> que maneja los cuadrantes automáticamente y la convertiremos a grados sexagesimales.</p>
            <div class="paso">
                 <h3>Paso 1: Determinar el Cuadrante</h3>
                 <p>Con ΔX negativo (-235.84) y ΔY positivo (1152.06), el punto B está en el <strong>Cuadrante IV (Nor-Oeste)</strong> respecto a A.</p>
            </div>
            <div class="paso">
                <h3>Paso 2: Calcular el Ángulo</h3>
                <div class="formula">θ (rad) = atan2(ΔX, ΔY) = atan2(-235.84, 1152.06)</div>
                <p>θ ≈ -0.20188 radianes</p>
            </div>
            <div class="paso">
                <h3>Paso 3: Convertir a Grados y Ajustar</h3>
                <p>Primero, convertimos de radianes a grados:</p>
                <div class="formula">θ (deg) = θ (rad) × (180 / π)</div>
                <p>θ ≈ -0.20188 × 57.2958 ≈ -11.57°</p>
                <p>Como el resultado es un ángulo negativo y queremos un acimut de 0° a 360°, le sumamos 360°:</p>
                <div class="formula">Acimut = -11.57° + 360°</div>
            </div>
            <div class="resultado">Orientación AB ≈ 348.43°</div>
        </div>

        <div id="ejercicio3" class="ejercicio-contenido">
            <h2>Ejercicio 3: Cálculo de Pendiente Media y por Tramos</h2>
            <div class="enunciado">
                <strong>Enunciado:</strong> Calcular la pendiente media y la de cada uno de los tramos de una ruta que pasa por los puntos A, B y C a partir de la siguiente información:
                 <ul>
                    <li>Coordenadas punto A (X, Y, Z): 720000 m, 4375000 m, 100 m</li>
                    <li>Coordenadas punto B (X, Y, Z): 725000 m, 4377500 m, 150 m</li>
                    <li>La distancia entre el punto B y C se ha medido en un mapa a escala 1:50000 siendo el valor 10 cm.</li>
                    <li>La equidistancia de este mapa es 50 m y los puntos B y C están en curvas de nivel consecutivas.</li>
                </ul>
            </div>
            
            <h3>Cálculo Pendiente Tramo AB</h3>
            <div class="paso">
                <h3>Paso 1: Calcular Distancia Horizontal (Reducida) AB</h3>
                <p>Dr_AB = <span class="math-sqrt"><span class="math-paren">(725000 - 720000)² + (4377500 - 4375000)²</span></span></p>
                <p>Dr_AB = <span class="math-sqrt"><span class="math-paren">(5000)² + (2500)²</span></span> = <span class="math-sqrt"><span class="math-paren">31250000</span></span> ≈ 5590.17 m</p>
            </div>
            <div class="paso">
                <h3>Paso 2: Calcular Desnivel AB</h3>
                <p>Desnivel_AB = Cota_B - Cota_A = 150 m - 100 m = 50 m</p>
            </div>
            <div class="paso">
                <h3>Paso 3: Calcular Pendiente AB</h3>
                <div class="formula">Pendiente (%) = (Desnivel / Distancia Reducida) × 100</div>
                <p>Pendiente_AB = (50 / 5590.17) × 100</p>
            </div>
            <div class="resultado">Pendiente Tramo AB ≈ 0.894 %</div>

            <h3>Cálculo Pendiente Tramo BC</h3>
            <div class="paso">
                <h3>Paso 1: Calcular Distancia Horizontal (Reducida) BC</h3>
                <p>Se convierte la distancia del mapa a distancia real.</p>
                <div class="formula">Dr_BC = Distancia Mapa × Denominador Escala</div>
                <p>Dr_BC = 10 cm × 50000 = 500000 cm = 5000 m</p>
            </div>
            <div class="paso">
                <h3>Paso 2: Calcular Desnivel BC</h3>
                <p>El desnivel es la equidistancia entre curvas de nivel consecutivas.</p>
                <p>Desnivel_BC = 50 m</p>
                 <small>(Asumimos que C es más alto que B. Si fuera descendente, el desnivel sería -50m y la pendiente negativa)</small>
            </div>
            <div class="paso">
                <h3>Paso 3: Calcular Pendiente BC</h3>
                <p>Pendiente_BC = (50 / 5000) × 100</p>
            </div>
            <div class="resultado">Pendiente Tramo BC = 1 %</div>

            <h3>Cálculo de la Pendiente Media (Ruta A-B-C)</h3>
             <div class="paso">
                <h3>Paso 1: Calcular Desnivel Total y Distancia Total</h3>
                <p>Desnivel Total = Desnivel_AB + Desnivel_BC = 50 m + 50 m = 100 m</p>
                <p>Distancia Reducida Total = Dr_AB + Dr_BC = 5590.17 m + 5000 m = 10590.17 m</p>
            </div>
             <div class="paso">
                <h3>Paso 2: Calcular Pendiente Media</h3>
                <p>Pendiente Media = (Desnivel Total / Distancia Reducida Total) × 100</p>
                <p>Pendiente Media = (100 / 10590.17) × 100</p>
            </div>
            <div class="resultado">Pendiente Media Ruta ABC ≈ 0.944 %</div>
        </div>

        <div id="ejercicio4" class="ejercicio-contenido">
            <h2>Ejercicio 4: Cálculo de Orientación y Distancia Geográfica</h2>
            <div class="enunciado">
                <strong>Enunciado:</strong> Calcular la orientación y distancia entre los puntos A y B a partir de las siguientes coordenadas:
                 <ul>
                    <li><b>A:</b> Longitud = 3,835941° E, Latitud = 40,00266° N</li>
                    <li><b>B:</b> Longitud = 0,168864° W, Latitud = 39,00095° N</li>
                </ul>
                Se deben usar las fórmulas proporcionadas:
                <div class="formula">d = arccos[(sin φa * sin φb) + (cos φa * cos φb * cos Δλ)]</div>
                <div class="formula">AB = arccos[(sin φb - sin φa * cos d) / (cos φa * sin d)]</div>
            </div>
            
            <h3>Cálculo de la Distancia</h3>
            <div class="paso">
                <h3>Paso 1: Definir Coordenadas y Calcular Δλ</h3>
                <p>Las longitudes Oeste se consideran negativas.</p>
                <p>φa = 40.00266°</p>
                <p>λa = 3.835941°</p>
                <p>φb = 39.00095°</p>
                <p>λb = -0.168864°</p>
                <p>Δλ = λb - λa = -0.168864 - 3.835941 = -4.004805°</p>
            </div>
            <div class="paso">
                <h3>Paso 2: Calcular Distancia Angular (d)</h3>
                <div class="formula">d = arccos[(sin(40.00266) * sin(39.00095)) + (cos(40.00266) * cos(39.00095) * cos(-4.004805))]</div>
                <p>d = arccos[(0.64282 * 0.62933) + (0.76601 * 0.77713 * 0.99756)]</p>
                <p>d = arccos[0.40457 + 0.59392]</p>
                <p>d = arccos[0.99849] ≈ 3.016°</p>
            </div>
            <div class="paso">
                <h3>Paso 3: Convertir Distancia Angular a Kilómetros</h3>
                <div class="formula">Distancia AB (km) = d × 111.11 km/°</div>
                <p>Distancia AB = 3.016 * 111.11</p>
            </div>
            <div class="resultado">Distancia AB ≈ 335.11 km</div>

            <h3>Cálculo de la Orientación (Acimut)</h3>
            <div class="paso" style="padding-bottom: 5px; margin-bottom: 5px;">
                 <div class="formulas-previas" style="background-color: #e9f5ff; border-color: #007bff; margin-top: 0; margin-bottom: 20px;">
                    <h4 style="border:none; margin-top:0;">Regla de Decisión para el Acimut (con fórmula <code>arccos</code>)</h4>
                    <p>El ángulo 'AB' que se obtiene de esta fórmula <code>arccos[...]</code> siempre está entre 0° y 180°. Para convertirlo en un acimut real (0°-360°), necesitamos saber si el destino (B) está al Este o al Oeste del origen (A). Esto lo determina el signo de <b>Δλ (λb - λa)</b>.</p>
                    <ul style="padding-left: 20px; margin-bottom: 0;">
                        <li>Si <b>Δλ es positivo (> 0)</b>, el destino está al <b>Este</b>. El acimut es el valor calculado directamente: <code>Acimut = AB</code>.</li>
                        <li>Si <b>Δλ es negativo (< 0)</b>, el destino está al <b>Oeste</b>. El acimut se calcula restando el valor del círculo completo: <code>Acimut = 360° - AB</code>.</li>
                    </ul>
                </div>
            </div>
            <div class="paso">
                <h3>Paso 1: Calcular Ángulo Base (AB)</h3>
                <div class="formula">AB = arccos[(sin(39.00095) - sin(40.00266) * cos(3.016)) / (cos(40.00266) * sin(3.016))]</div>
                <p>AB = arccos[(0.62933 - 0.64282 * 0.99862) / (0.76601 * 0.05263)]</p>
                <p>AB = arccos[(0.62933 - 0.64194) / 0.04032]</p>
                <p>AB = arccos[-0.00261 / 0.04032] = arccos[-0.06473] ≈ 93.71°</p>
            </div>
            <div class="paso">
                <h3>Paso 2: Corregir para Obtener Acimut</h3>
                <p>En nuestro caso, <b>Δλ es negativo</b> (-4.005°), lo que indica que el destino está al <b>Oeste</b>. Por lo tanto, aplicamos la corrección:</p>
                <div class="formula">Acimut = 360° - AB</div>
                <p>Acimut = 360° - 93.71°</p>
            </div>
            <div class="resultado">Orientación AB ≈ 266.29°</div>
        </div>
    </div>

    <script>
        function toggleMenu() {
            var x = document.getElementById("ejercicio-links");
            x.style.display = (x.style.display === "flex") ? "none" : "flex";
        }

        function mostrarEjercicio(id) {
            var contenidos = document.getElementsByClassName('ejercicio-contenido');
            for (var i = 0; i < contenidos.length; i++) {
                contenidos[i].style.display = 'none';
            }
            document.getElementById(id).style.display = 'block';

            var links = document.querySelectorAll('.ejercicio-links-container a');
            links.forEach(function(link) { link.classList.remove('active'); });
            
            var activeLink = document.querySelector('.ejercicio-links-container a[onclick*="' + id + '"]');
            if(activeLink) { activeLink.classList.add('active'); }

            var menu = document.getElementById("ejercicio-links");
            if (window.innerWidth < 768) { // Oculta el menú en móviles tras la selección
                 menu.style.display = "none";
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            mostrarEjercicio('ejercicio1');
        });
    </script>

</body>
</html>
